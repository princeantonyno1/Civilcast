<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Civilcast</title>
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&amp;display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#FAA61A", // Yellow
                        "background-light": "#ffffff", // White
                        "background-dark": "#1a1a1a", // Dark gray for dark mode
                        "sidebar-light": "#f5f5f5", // Light gray
                        "sidebar-dark": "#2d2d2d", // Dark gray for dark mode sidebar
                        "top-nav-light": "#000000", // Black
                        "top-nav-dark": "#000000", // Black
                        "text-main": "#000000", // Black
                        "text-muted": "#6b7280", // Muted gray
                        "success": "#22c55e", // Green
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
    <style>
        .material-symbols-outlined {
            font-variation-settings:
                'FILL' 0,
                'wght' 400,
                'GRAD' 0,
                'opsz' 24
        }
    </style>
</head>

<body class="bg-background-light dark:bg-background-dark font-display text-text-main dark:text-gray-200">
    <div class="flex flex-col min-h-screen">
        <header class="flex items-center justify-between px-6 py-3 bg-top-nav-light dark:bg-top-nav-dark text-white">
            <div class="flex items-center gap-8">
                <div class="flex items-center gap-3 bg-black px-3 py-1 rounded-md">
                    <img class="h-9 w-auto" src="../assets/civilcast-white_logo.png" alt="civilcast">
                </div>
            </div>
            <div class="flex items-center gap-6">
                <nav class="hidden md:flex items-center space-x-12 text-sm font-medium">

                    <a class="text-primary" href="Chat.html">Chat</a>
                    <a class="hover:text-primary transition-colors" href="RequestNewKnowledge.html">Request new
                        knowledge</a>
                </nav>
                <div class="flex items-center gap-4 ml-6">
                    <button class="p-2 mt-1.5 rounded-full hover:bg-primary/20 text-gray-300">
                        <svg fill="currentColor" height="20" viewBox="0 0 256 256" width="20"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M221.8,175.94C216.25,166.38,208,139.33,208,104a80,80,0,1,0-160,0c0,35.34-8.26,62.38-13.81,71.94A16,16,0,0,0,48,200H88.81a40,40,0,0,0,78.38,0H208a16,16,0,0,0,13.8-24.06ZM128,216a24,24,0,0,1-22.62-16h45.24A24,24,0,0,1,128,216ZM48,184c7.7-13.24,16-43.92,16-80a64,64,0,1,1,128,0c0,36.05,8.28,66.73,16,80Z">
                            </path>
                        </svg>
                    </button>
                    <div class="relative inline-block">
                        <!-- Profile Icon -->
                        <div id="profileBtn" class="w-10 h-10 bg-cover rounded-full cursor-pointer"
                            style="background-image: url('../assets/employee.png');">
                        </div>

                        <!-- Popup -->
                        <div id="profilePopup"
                            class="hidden absolute right-0 mt-2 w-80 bg-white border rounded-lg shadow-lg p-4 z-50">
                            <div class="flex items-center space-x-3">
                                <img src="../assets/employee.png" class="w-10 h-10 rounded-full" />
                                <div>
                                    <p class="font-semibold text-black">Alex Samuel</p>
                                    <p class="text-sm text-gray-500">employee@civilcast.com</p>
                                </div>
                            </div>
                            <hr class="my-3">
                            <p class="text-sm text-gray-700 pl-3">Employee</p>
                            <a href="Settings.html">
                                <button
                                    class="mt-2 w-full text-left text-black px-3 py-2 rounded-lg hover:bg-gray-100">Settings</button>
                            </a>
                            <a href="../index.html">
                                <button
                                    class="mt-2 w-full text-left text-black px-3 py-2 rounded-lg hover:bg-gray-100">Log
                                    out</button>
                            </a>
                        </div>
                    </div>

                    <script>
                        const btn = document.getElementById("profileBtn");
                        const popup = document.getElementById("profilePopup");

                        btn.addEventListener("click", () => {
                            popup.classList.toggle("hidden");
                        });
                        document.addEventListener("click", (e) => {
                            if (!btn.contains(e.target) && !popup.contains(e.target)) {
                                popup.classList.add("hidden");
                            }
                        });
                    </script>
                </div>
            </div>
        </header>
        <div class="flex flex-1">
            <aside class="w-80 p-6 bg-sidebar-light dark:bg-sidebar-dark hidden lg:flex flex-col gap-8">
                <!-- Spaces -->
                <nav>
                    <h3 class="flex items-center px-3 text-lg font-bold text-gray-900 dark:text-white mb-2">
                        <span class="material-symbols-outlined mr-2">space_dashboard</span>
                        Spaces
                    </h3>
                    <ul class="space-y-1" data-section="spaces">
                        <li><a class="sidebar-link block px-3 py-2 text-text-muted hover:bg-gray-200 rounded-md"
                                href="#">Operations</a></li>
                        <li><a class="sidebar-link block px-3 py-2 text-text-muted hover:bg-gray-200 rounded-md"
                                href="#">Sales &amp; Marketing</a></li>
                        <li><a class="sidebar-link block px-3 py-2 text-text-muted hover:bg-gray-200 rounded-md"
                                href="#">Logistics</a></li>
                        <li><a class="sidebar-link block px-3 py-2 text-text-muted hover:bg-gray-200 rounded-md"
                                href="#">Engineering &amp; Design</a></li>
                        <li><a class="sidebar-link block px-3 py-2 text-text-muted hover:bg-gray-200 rounded-md"
                                href="#">Project Management</a></li>
                    </ul>
                </nav>

                <!-- Skills -->
                <nav>
                    <h3 class="flex items-center px-3 text-lg font-bold text-gray-900 dark:text-white mb-2">
                        <span class="material-symbols-outlined mr-2">psychology</span>
                        Skills
                    </h3>
                    <ul class="space-y-1" data-section="skills">
                        <li><a class="sidebar-link block px-3 py-2 text-text-muted hover:bg-gray-200 rounded-md"
                                href="#">Installation guide</a></li>
                        <li><a class="sidebar-link block px-3 py-2 text-text-muted hover:bg-gray-200 rounded-md"
                                href="#">Product drawings</a></li>
                        <li><a class="sidebar-link block px-3 py-2 text-text-muted hover:bg-gray-200 rounded-md"
                                href="#">Australian standards</a></li>
                        <li><a class="sidebar-link block px-3 py-2 text-text-muted hover:bg-gray-200 rounded-md"
                                href="#">Our website and catalogue ...</a></li>
                    </ul>
                </nav>

                <!-- Chats -->
                <nav>
                    <h3 class="flex items-center px-3 text-lg font-bold text-gray-900 dark:text-white mb-2">
                        <span class="material-symbols-outlined mr-2">chat</span>
                        Chats
                    </h3>
                    <ul class="space-y-1" data-section="chats">
                        <li>
                            <!-- Always selected -->
                            <a class="sidebar-link active block px-3 py-2 rounded-md" href="#">Scope of AS 3996-2019</a>
                        </li>
                        <li><a class="sidebar-link block px-3 py-2 text-text-muted hover:bg-gray-200 rounded-md"
                                href="#">Brochure enquiry</a></li>
                        <li><a class="sidebar-link block px-3 py-2 text-text-muted hover:bg-gray-200 rounded-md"
                                href="#">Surcharge Pit Grates</a></li>
                        <li><a class="sidebar-link block px-3 py-2 text-text-muted hover:bg-gray-200 rounded-md"
                                href="#">Colour and Theme Details</a></li>
                    </ul>
                </nav>
            </aside>

            <script>
                const links = document.querySelectorAll(".sidebar-link");

                // Style for active state
                function activate(link) {
                    link.classList.add("bg-gray-200", "text-black");
                    link.classList.remove("text-text-muted");
                }

                function deactivate(link) {
                    link.classList.remove("bg-gray-200", "text-black");
                    link.classList.add("text-text-muted");
                }

                // Initialize "Scope of AS 3996-2019" as always active
                const fixedChat = document.querySelector(
                    '[data-section="chats"] .sidebar-link.active'
                );
                activate(fixedChat);

                links.forEach(link => {
                    link.addEventListener("click", () => {
                        const section = link.closest("ul[data-section]");
                        const sectionLinks = section.querySelectorAll(".sidebar-link");

                        // If it's the fixed chat item, ignore clicks
                        if (link === fixedChat) return;

                        // Deactivate others in the same section (except fixedChat)
                        sectionLinks.forEach(l => {
                            if (l !== fixedChat) deactivate(l);
                        });

                        // Activate clicked
                        activate(link);
                    });
                });
            </script>
            <main class="flex-1 p-6 bg-background-light dark:bg-background-dark flex flex-col">
                <div class="max-w-4xl mx-auto flex-1 flex flex-col w-full">
                    <div class="mb-6">
                        <h2 class="text-3xl font-bold text-text-main dark:text-white">Scope of AS 3996-2019</h2>
                        <p class="text-sm text-text-muted dark:text-gray-400">Scope of AS 3996-2019</p>
                    </div>
                    <div class="flex-1 space-y-6 overflow-y-auto pr-4" id="chatContainer">
                        <!-- Chat messages remain unchanged -->
                        <div class="flex items-start gap-4 justify-end">
                            <div class="flex-1 max-w-lg text-right">
                                <div class="bg-gray-200 dark:bg-gray-800 p-4 rounded-lg inline-block text-left">
                                    <p class="text-sm text-gray-800 dark:text-gray-200">
                                        What is the scope and key requirements covered by the AS 3996-2019 Standard for
                                        access covers and grates?
                                    </p>
                                </div>
                                <p class="text-xs text-text-muted dark:text-gray-500 mt-1">John Doe - 10:30 AM</p>
                            </div>
                            <div class="w-10 h-10 bg-cover bg-center rounded-full"
                                style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuDkMTEe4NAtj6o7ZYiCQWQXVmSpaQMbIIV3v-QomJGlheCu0gU21q2WPyS751rxB8U5SniroD_bBa96ghTvDrrXgtf_IdcE4qIy2KcXh9oRN83DxVdMVnfrVFWlwIt2vqGAPMI9577cKpr9P_tHrIXuoRmKs5f-9IdlFZ2g8ICpdUSXaACE_US_PGmVD63hvNfbiAyKIiIoeJm53U68KQwNbRYFWjwlH3J0PSLZjGsXU9vVhgIJhfNIE51JNiuSXrjciqu0OCkoTPw');">
                            </div>
                        </div>

                        <div class="flex items-start gap-4">
                            <div
                                class="w-10 h-10 rounded-full bg-primary flex items-center justify-center text-white font-bold">
                                C
                            </div>
                            <div class="flex-1 max-w-2xl"> <!-- Increased max width for AI message -->
                                <div class="bg-transparent p-4 rounded-lg" id="aiMessage">
                                    <p class="text-sm text-text-main dark:text-gray-200">
                                        AS 3996-2019 specifies requirements for access covers and grates used in
                                        vehicular and pedestrian areas with a clear opening of up to 1300 mm. It covers
                                        products made from materials like iron, steel, aluminium, concrete, and
                                        polymers, aiming for a minimum service life of 25 years for polymeric and 50
                                        years for other materials. The Standard excludes fire resistance and certain
                                        classes or materials. It defines classification by load capacity, opening type,
                                        ventilation/sealing, and specifies permanent marking requirements. It includes
                                        rigorous testing for loads, watertightness, gas-tightness, slip-resistance,
                                        impact, fatigue, and UV resistance to ensure durability and safety.
                                    </p>
                                    <div class="mt-4">
                                        <p class="text-sm font-medium text-success mb-1">AI Confidence: High (95%)</p>
                                        <div class="w-full bg-gray-200 rounded-full h-1.5 dark:bg-gray-700">
                                            <div class="bg-success h-1.5 rounded-full" style="width: 95%"></div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Action buttons in a single line -->
                                <div class="flex flex-nowrap gap-2 mt-2">
                                    <button
                                        class="action-btn px-3 py-1.5 text-sm font-medium text-black bg-sidebar-light rounded-md hover:opacity-90"
                                        data-action="satisfied">Satisfied</button>
                                    <button
                                        class="action-btn px-3 py-1.5 text-sm font-medium text-black bg-sidebar-light rounded-md hover:opacity-90"
                                        data-action="report">Report Issue</button>
                                    <button
                                        class="action-btn px-3 py-1.5 text-sm font-medium text-black bg-sidebar-light rounded-md hover:opacity-90"
                                        data-action="suggest">Suggest Correction</button>
                                    <button
                                        class="action-btn px-3 py-1.5 text-sm font-medium text-black bg-sidebar-light rounded-md hover:opacity-90"
                                        data-action="human">Human Assistance</button>
                                    <button
                                        class="action-btn px-3 py-1.5 text-sm font-medium text-black bg-sidebar-light rounded-md hover:opacity-90"
                                        data-action="knowledge">Add Knowledge</button>
                                </div>

                                <p class="text-xs text-text-muted dark:text-gray-500 mt-2 ml-4">Civilcast AI - 10:31 AM
                                </p>
                            </div>
                        </div>

                    </div>

                    <div class="mt-auto pt-6">
                        <div class="relative @container">
                            <textarea
                                class="w-full pl-4 pr-32 py-3 rounded-lg bg-background-light dark:bg-background-dark border border-gray-300 dark:border-gray-600 focus:ring-primary focus:border-primary resize-none text-sm text-text-main dark:text-white placeholder-text-muted dark:placeholder-gray-400"
                                placeholder="Ask Civilcast..." rows="1"></textarea>
                            <div class="absolute inset-y-0 right-0 flex items-center pr-3">
                                <button
                                    class="p-2 rounded-full text-text-muted dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800">
                                    <svg fill="currentColor" height="20" viewBox="0 0 256 256" width="20"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Z">
                                        </path>
                                    </svg>
                                </button>
                                <button
                                    class="hidden @[480px]:inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-text-main bg-primary rounded-lg hover:opacity-90">
                                    Send
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    <script>
        const chatContainer = document.getElementById('chatContainer');
        const actionButtons = document.querySelectorAll('.action-btn');
        const aiMessage = document.getElementById('aiMessage');

        const responses = {
            satisfied: "Awesome! Do you need anything else I can assist you with?",
            report: "Thank you for reporting! Your request has been added to the queue — you'll hear back soon. Is there anything else I can help you with in the meantime?",
            suggest: "Please add a note explaining the issue or what needs to be updated so the collaborator can assist you effectively.",
            human: "Our collaborators will review your request and get back to you shortly. Thank you for your patience!",
            knowledge: "Opening Knowledge Base..."
        };

        actionButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                // Reset all buttons
                actionButtons.forEach(b => b.classList.remove('bg-primary', 'text-white'));
                actionButtons.forEach(b => b.classList.add('bg-sidebar-light', 'text-black'));

                // Highlight clicked button
                btn.classList.remove('bg-sidebar-light', 'text-black');
                btn.classList.add('bg-primary', 'text-white');

                const action = btn.dataset.action;
                let newMessage = document.createElement('div');
                newMessage.className = "bg-gray-200 dark:bg-gray-800 p-4 rounded-lg mt-2 text-sm text-text-main dark:text-white";

                if (action === 'knowledge') {
                    window.location.href = 'RequestNewKnowledge.html';
                    return;
                } else {
                    newMessage.innerText = responses[action];
                }

                chatContainer.appendChild(newMessage);
                chatContainer.scrollTop = chatContainer.scrollHeight;
            });
        });
    </script>
</body>

</html>